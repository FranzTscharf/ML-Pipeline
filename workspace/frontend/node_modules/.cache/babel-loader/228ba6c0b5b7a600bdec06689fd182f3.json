{"ast":null,"code":"var _jsxFileName = \"/Users/i504430/OneDrive - SAP SE/SAP/Masterarbeit/tensorflow/workspace/frontend/src/upload.jsx\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport * as UIkit from \"uikit\";\nimport Model_display from \"./model_display\";\nimport Model_correction from \"./model_correction\";\nconst styleObj = {\n  padding: '30px'\n};\nvar filename;\n\nclass Upload extends React.Component {\n  componentDidMount() {\n    var bar = document.getElementById('js-progressbar');\n    UIkit.upload('.js-upload', {\n      url: process.env.REACT_APP_API_GATEWAY_URL + 'gateway/document',\n      dataType: 'form-data',\n      name: 'file',\n      multiple: false,\n      allow: '*.(jpg|jpeg|gif|png|pdf)',\n      // allow only pdf and images\n      //funcitons executing during upload etc.\n      beforeSend: function (environment) {\n        console.log('beforeSend', arguments); // The environment object can still be modified here.\n        // var {data, method, headers, xhr, responseType} = environment;\n      },\n      beforeAll: function () {\n        console.log('beforeAll', arguments);\n      },\n      load: function () {\n        console.log('load', arguments);\n      },\n      error: function () {\n        console.log('error', arguments);\n        UIkit.notification({\n          message: 'Upload Failed!',\n          status: 'danger',\n          pos: 'top-right',\n          timeout: 5000\n        });\n      },\n      complete: function (e) {\n        console.log('complete', arguments);\n        var upload_response = e.responseText;\n        var upload_response_json = JSON.parse(upload_response);\n        console.log(upload_response_json.img_name);\n        filename = upload_response_json.img_name;\n        UIkit.notification({\n          message: 'Upload Completed!',\n          status: 'success',\n          pos: 'top-right',\n          timeout: 3000\n        }); // eslint-disable-next-line no-undef\n        //!#TODO auslagern in function detecttoarray\n\n        fetch(process.env.REACT_APP_API_GATEWAY_URL + \"serving/detecttoarray?filename=\" + filename).then(res => res.json()).then(result => {\n          console.log(result);\n          bar.value = bar.value + bar.value;\n          UIkit.notification({\n            message: 'Identify tags!',\n            status: 'success',\n            pos: 'top-right',\n            timeout: 2000\n          }); //!#TODO auslagern in function roiToText\n\n          var result_json = JSON.parse(JSON.stringify(result));\n          let formData = new FormData();\n          formData.append('filename', filename);\n          formData.append('json', JSON.stringify(result_json));\n          fetch(process.env.REACT_APP_API_GATEWAY_URL + \"ocr/roiToText\", {\n            method: 'post',\n            body: formData\n          }).then(res => res.json()).then(result => {\n            bar.value = bar.value + bar.value;\n            console.log(result); //!#TODO into extra function\n            //Set the D3 Data array with the putput of the gateway tf.serving instances\n            //that means the positions of the bounding boxes in D3.js\n            //!#TODO into extra function\n            //pass the koordinates of the tf.serving to the d3 model correktion Dialog window etc. popup for the bounding boxes\n\n            ReactDOM.render(React.createElement(Model_correction, {\n              inputData: result_json\n            }), document.getElementById(\"ID_Model_correction\")); //!#TODO if not (('identification' || 'customer') and 'type') exists in result => direct zur manuellen verarbeitung\n\n            var result_rep = result.replace(/'/g, '\"');\n            var jsonObj = JSON.parse(result_rep);\n\n            if (typeof jsonObj['type'] != 'undefined') {\n              var doc_type = jsonObj['type'];\n            } else {\n              var doc_type = \"\";\n            }\n\n            if (typeof jsonObj['identification'] != 'undefined') {\n              var doc_identification = jsonObj['identification'];\n            } else {\n              var doc_identification = \"\";\n            }\n\n            if (typeof jsonObj['customer'] != 'undefined') {\n              var doc_customer = jsonObj['customer'];\n            } else {\n              var doc_customer = \"\";\n            }\n\n            if (typeof jsonObj['header'] != 'undefined') {\n              var doc_header = jsonObj['header'];\n            } else {\n              var doc_header = \"\";\n            }\n\n            if (typeof jsonObj['content'] != 'undefined') {\n              var doc_content = jsonObj['content'];\n            } else {\n              var doc_content = \"\";\n            }\n\n            if (typeof doc_identification != 'undefined' && doc_identification.toLowerCase().match(\"auftr*agsnu*\")) {\n              var start = doc_identification.toLowerCase().search(\"auftr*agsnu*\"); //split from start to end and take the resulting string\n              // console.log(auftragsnummer);\n\n              var auftragsnummer = doc_identification.slice(start, start + 35);\n              console.log(start);\n              console.log(auftragsnummer); //only keep numbers\n\n              doc_identification = auftragsnummer.replace(/\\D/g, '');\n              console.log(doc_identification);\n            }\n\n            console.log(jsonObj); //#!TODO auslagern in externe Funktion um Werte zu schreiben.\n\n            var model = document.getElementById(\"modelDisplay\"); // Set the input fields\n\n            document.getElementById(\"input_type\").placeholder = doc_type;\n            document.getElementById(\"input_id\").placeholder = doc_identification;\n            document.getElementById(\"input_customer\").placeholder = doc_customer;\n            document.getElementById(\"input_content\").placeholder = doc_content;\n            document.getElementById(\"input_header\").placeholder = doc_header;\n            document.getElementById(\"text_type\").value = doc_type;\n            document.getElementById(\"text_identification\").value = doc_identification;\n            document.getElementById(\"text_customer\").value = doc_customer;\n            document.getElementById(\"text_header\").value = doc_header;\n            document.getElementById(\"text_content\").value = doc_content;\n            document.getElementById(\"imgId\").value = filename; //set the image src etc. url\n\n            document.querySelector(\"#documentPicture\").src = process.env.REACT_APP_API_GATEWAY_URL + \"tmp/\" + filename;\n            UIkit.modal(model).show();\n            UIkit.notification({\n              message: 'All Done!',\n              status: 'success',\n              pos: 'top-right',\n              timeout: 3000\n            });\n            bar.value = 0;\n          }, // Note: it's important to handle errors here\n          // instead of a catch() block so that we don't swallow\n          // exceptions from actual bugs in components.\n          error => {\n            UIkit.notification({\n              message: 'File detection failed!',\n              status: 'danger',\n              pos: 'top-right',\n              timeout: 5000\n            });\n            console.error(error);\n          });\n        }, // Note: it's important to handle errors here\n        // instead of a catch() block so that we don't swallow\n        // exceptions from actual bugs in components.\n        error => {\n          console.error(error);\n          UIkit.notification({\n            message: 'File detection failed!',\n            status: 'danger',\n            pos: 'top-right',\n            timeout: 5000\n          });\n        });\n      },\n      loadStart: function (e) {\n        console.log('loadStart', arguments);\n        bar.removeAttribute('hidden');\n        bar.max = e.total;\n        bar.value = e.loaded;\n      },\n      progress: function (e) {\n        console.log('progress', arguments);\n        bar.max = e.total;\n        bar.value = e.loaded / 3;\n      },\n      loadEnd: function (e) {\n        console.log('loadEnd', arguments);\n        bar.max = e.total;\n        bar.value = e.loaded / 3;\n      },\n      completeAll: function (e) {\n        var upload_response = e.responseText;\n        console.log('completeAll', arguments); //setTimeout(function () {\n        //    bar.setAttribute('hidden', 'hidden');\n        //}, 1000);\n      }\n    });\n  }\n\n  renderTableData() {\n    return this.state.students.map((student, index) => {\n      const id = student.id,\n            name = student.name,\n            age = student.age,\n            email = student.email; //destructuring\n\n      return React.createElement(\"tr\", {\n        key: id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, id), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, age), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, email));\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"uk-container\",\n      style: styleObj,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Upload\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Datei ausw\\xE4hlen\"), React.createElement(\"div\", {\n      className: \"js-upload uk-placeholder uk-text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      \"uk-icon\": \"icon: cloud-upload\",\n      className: \"uk-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      width: \"20\",\n      height: \"20\",\n      viewBox: \"0 0 20 20\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      \"data-svg\": \"cloud-upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"path\", {\n      fill: \"none\",\n      stroke: \"#000\",\n      strokeWidth: \"1.1\",\n      d: \"M6.5,14.61 L3.75,14.61 C1.96,14.61 0.5,13.17 0.5,11.39 C0.5,9.76 1.72,8.41 3.31,8.2 C3.38,5.31 5.75,3 8.68,3 C11.19,3 13.31,4.71 13.89,7.02 C14.39,6.8 14.93,6.68 15.5,6.68 C17.71,6.68 19.5,8.45 19.5,10.64 C19.5,12.83 17.71,14.6 15.5,14.6 L12.5,14.6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }), React.createElement(\"polyline\", {\n      fill: \"none\",\n      stroke: \"#000\",\n      points: \"7.25 11.75 9.5 9.5 11.75 11.75\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"path\", {\n      fill: \"none\",\n      stroke: \"#000\",\n      d: \"M9.5,18 L9.5,9.5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }))), React.createElement(\"span\", {\n      className: \"uk-text-middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \" Ziehen Sie Dateien per Drag & Drop hinein oder \"), React.createElement(\"div\", {\n      \"uk-form-custom\": \"\",\n      className: \"uk-form-custom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      multiple: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"uk-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"w\\xE4hlen Sie eine Datei aus.\"))), React.createElement(\"progress\", {\n      id: \"js-progressbar\",\n      className: \"uk-progress\",\n      value: \"0\",\n      max: \"100\",\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Liste der verarbeiteten Dokumente\"), React.createElement(\"div\", {\n      className: \"uk-overflow-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"uk-table uk-table-striped\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Datum\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Download\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"Tags\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"code\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"2019-08-02-bestellakte-max_muster\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, \"04.11.2019 12:02\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"PDF\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"0987432094\"), \" \", React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"Bestellung PKW\"))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"code\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"Erga\\u0308nzungsvereinbarung-kunde-9920113\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"04.11.2019 11:20\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, \"PDF\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"0977433302\"), \" \", React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"Auftragseingang\"))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"code\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"Kunde-Laura-Seger_z.01\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, \"04.11.2019 10:05\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"PDF\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"0967438025\"), \" \", React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"Zahlungs\\xFCbersicht\"))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(\"code\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"01-029_Bestellung-Hans-Vellguth\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, \"12.10.2019 14:35\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, \"PDF\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"0938439327\"), \" \", React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"Zahlungs\\xFCbersicht\"))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(\"code\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Lauren-Kohl_Nr02003-2019\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"12.10.2019 14:35\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"PDF\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"0924479693\"), \" \", React.createElement(\"span\", {\n      className: \"uk-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"U\\u0308bernahmeinformationen\")))))), React.createElement(Model_display, {\n      childRef: this.myRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"ID_Model_correction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["/Users/i504430/OneDrive - SAP SE/SAP/Masterarbeit/tensorflow/workspace/frontend/src/upload.jsx"],"names":["React","Component","ReactDOM","UIkit","Model_display","Model_correction","styleObj","padding","filename","Upload","componentDidMount","bar","document","getElementById","upload","url","process","env","REACT_APP_API_GATEWAY_URL","dataType","name","multiple","allow","beforeSend","environment","console","log","arguments","beforeAll","load","error","notification","message","status","pos","timeout","complete","e","upload_response","responseText","upload_response_json","JSON","parse","img_name","fetch","then","res","json","result","value","result_json","stringify","formData","FormData","append","method","body","render","createElement","inputData","result_rep","replace","jsonObj","doc_type","doc_identification","doc_customer","doc_header","doc_content","toLowerCase","match","start","search","auftragsnummer","slice","model","placeholder","querySelector","src","modal","show","loadStart","removeAttribute","max","total","loaded","progress","loadEnd","completeAll","renderTableData","state","students","map","student","index","id","age","email","myRef"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ReactDOM from 'react-dom';\nimport * as UIkit from \"uikit\";\nimport Model_display from \"./model_display\";\nimport Model_correction from \"./model_correction\";\n\nconst styleObj = {\n    padding: '30px'\n};\nvar filename;\n\nclass Upload extends React.Component {\n\n    componentDidMount() {\n        var bar = document.getElementById('js-progressbar');\n        UIkit.upload('.js-upload',{\n            url: process.env.REACT_APP_API_GATEWAY_URL + 'gateway/document',\n            dataType: 'form-data',\n            name: 'file',\n            multiple: false,\n            allow : '*.(jpg|jpeg|gif|png|pdf)', // allow only pdf and images\n\n            //funcitons executing during upload etc.\n\n            beforeSend: function (environment) {\n                console.log('beforeSend', arguments);\n\n                // The environment object can still be modified here.\n                // var {data, method, headers, xhr, responseType} = environment;\n\n            },\n            beforeAll: function () {\n                console.log('beforeAll', arguments);\n            },\n            load: function () {\n                console.log('load', arguments);\n            },\n            error: function () {\n                console.log('error', arguments);\n                UIkit.notification({message: 'Upload Failed!', status: 'danger', pos: 'top-right', timeout: 5000});\n            },\n            complete: function (e) {\n                console.log('complete', arguments);\n                var upload_response = e.responseText;\n                var upload_response_json = JSON.parse(upload_response);\n                console.log(upload_response_json.img_name);\n                filename = upload_response_json.img_name;\n                UIkit.notification({message: 'Upload Completed!', status: 'success', pos: 'top-right', timeout: 3000});\n                // eslint-disable-next-line no-undef\n\n                //!#TODO auslagern in function detecttoarray\n                fetch(process.env.REACT_APP_API_GATEWAY_URL + \"serving/detecttoarray?filename=\" + filename)\n                    .then(res => res.json())\n                    .then(\n                        (result) => {\n                            console.log(result);\n                            bar.value = bar.value + bar.value;\n                            UIkit.notification({message: 'Identify tags!', status: 'success', pos: 'top-right', timeout: 2000});\n                            //!#TODO auslagern in function roiToText\n                            var result_json = JSON.parse(JSON.stringify(result));\n                            let formData = new FormData();\n                            formData.append('filename', filename);\n                            formData.append('json', JSON.stringify(result_json));\n                            fetch(process.env.REACT_APP_API_GATEWAY_URL + \"ocr/roiToText\",{method: 'post',body: formData})\n                                .then(res => res.json())\n                                .then(\n                                    (result) => {\n                                        bar.value = bar.value + bar.value;\n                                        console.log(result);\n                                        //!#TODO into extra function\n                                        //Set the D3 Data array with the putput of the gateway tf.serving instances\n                                        //that means the positions of the bounding boxes in D3.js\n\n                                        //!#TODO into extra function\n                                        //pass the koordinates of the tf.serving to the d3 model correktion Dialog window etc. popup for the bounding boxes\n                                        ReactDOM.render(React.createElement(Model_correction,{inputData: result_json}), document.getElementById(\"ID_Model_correction\"));\n\n                                        //!#TODO if not (('identification' || 'customer') and 'type') exists in result => direct zur manuellen verarbeitung\n                                        var result_rep = result.replace(/'/g,'\"');\n                                        var jsonObj = JSON.parse(result_rep);\n                                        if (typeof jsonObj['type'] != 'undefined'){\n                                            var doc_type = jsonObj['type'];\n                                        } else {var doc_type = \"\"}\n                                        if (typeof jsonObj['identification'] != 'undefined'){\n                                            var doc_identification = jsonObj['identification'];\n                                        } else {var doc_identification = \"\"}\n                                        if (typeof jsonObj['customer'] != 'undefined'){\n                                            var doc_customer = jsonObj['customer'];\n                                        } else {var doc_customer = \"\"}\n                                        if (typeof jsonObj['header'] != 'undefined'){\n                                            var doc_header = jsonObj['header'];\n                                        } else {var doc_header = \"\"}\n                                        if (typeof jsonObj['content'] != 'undefined'){\n                                            var doc_content = jsonObj['content'];\n                                        } else {var doc_content = \"\"}\n                                        if ((typeof doc_identification != 'undefined') && (doc_identification.toLowerCase().match(\"auftr*agsnu*\"))) {\n                                            var start = doc_identification.toLowerCase().search(\"auftr*agsnu*\");\n                                            //split from start to end and take the resulting string\n                                            // console.log(auftragsnummer);\n                                            var auftragsnummer = doc_identification.slice(start, start+35);\n                                            console.log(start);\n                                            console.log(auftragsnummer);\n                                            //only keep numbers\n                                            doc_identification = auftragsnummer.replace(/\\D/g,'');\n                                            console.log(doc_identification);\n                                        }\n                                        console.log(jsonObj);\n\n                                        //#!TODO auslagern in externe Funktion um Werte zu schreiben.\n                                        var model = document.getElementById(\"modelDisplay\");\n                                        // Set the input fields\n                                        document.getElementById(\"input_type\").placeholder = doc_type;\n                                        document.getElementById(\"input_id\").placeholder = doc_identification;\n                                        document.getElementById(\"input_customer\").placeholder = doc_customer;\n                                        document.getElementById(\"input_content\").placeholder = doc_content;\n                                        document.getElementById(\"input_header\").placeholder = doc_header;\n\n                                        document.getElementById(\"text_type\").value = doc_type;\n                                        document.getElementById(\"text_identification\").value = doc_identification;\n                                        document.getElementById(\"text_customer\").value = doc_customer;\n                                        document.getElementById(\"text_header\").value = doc_header;\n                                        document.getElementById(\"text_content\").value = doc_content;\n                                        document.getElementById(\"imgId\").value = filename;\n                                        //set the image src etc. url\n                                        document.querySelector(\"#documentPicture\").src = process.env.REACT_APP_API_GATEWAY_URL + \"tmp/\" + filename;\n                                        UIkit.modal(model).show();\n                                        UIkit.notification({message: 'All Done!', status: 'success', pos: 'top-right', timeout: 3000});\n                                        bar.value = 0;\n                                    },\n                                    // Note: it's important to handle errors here\n                                    // instead of a catch() block so that we don't swallow\n                                    // exceptions from actual bugs in components.\n                                    (error) => {\n                                        UIkit.notification({message: 'File detection failed!', status: 'danger', pos: 'top-right', timeout: 5000});\n                                        console.error(error);\n                                    }\n                                )\n\n\n                        },\n                        // Note: it's important to handle errors here\n                        // instead of a catch() block so that we don't swallow\n                        // exceptions from actual bugs in components.\n                        (error) => {\n                            console.error(error);\n                            UIkit.notification({message: 'File detection failed!', status: 'danger', pos: 'top-right', timeout: 5000});\n                        }\n                    )\n\n\n            },\n\n            loadStart: function (e) {\n                console.log('loadStart', arguments);\n                bar.removeAttribute('hidden');\n                bar.max = e.total;\n                bar.value = e.loaded;\n            },\n\n            progress: function (e) {\n                console.log('progress', arguments);\n\n                bar.max = e.total;\n                bar.value = e.loaded / 3;\n            },\n\n            loadEnd: function (e) {\n                console.log('loadEnd', arguments);\n\n                bar.max = e.total;\n                bar.value = e.loaded / 3;\n            },\n\n            completeAll: function (e) {\n                var upload_response = e.responseText;\n                console.log('completeAll', arguments);\n\n                //setTimeout(function () {\n                //    bar.setAttribute('hidden', 'hidden');\n                //}, 1000);\n            }\n\n        });\n    }\n\n    renderTableData() {\n        \n        return this.state.students.map((student, index) => {\n            const { id, name, age, email } = student //destructuring\n            return (\n                <tr key={id}>\n                    <td>{id}</td>\n                    <td>{name}</td>\n                    <td>{age}</td>\n                    <td>{email}</td>\n                </tr>\n            )\n        })\n    }\n\n    render() {\n\n        return (\n\n            <div className=\"uk-container\" style={styleObj}>\n\n                <h1>Upload</h1>\n\n                <h2>Datei auswählen</h2>\n\n                <div className=\"js-upload uk-placeholder uk-text-center\">\n                    <span uk-icon=\"icon: cloud-upload\" className=\"uk-icon\"><svg width=\"20\" height=\"20\"\n                                                                                viewBox=\"0 0 20 20\"\n                                                                                xmlns=\"http://www.w3.org/2000/svg\"\n                                                                                data-svg=\"cloud-upload\"><path\n                        fill=\"none\" stroke=\"#000\" strokeWidth=\"1.1\"\n                        d=\"M6.5,14.61 L3.75,14.61 C1.96,14.61 0.5,13.17 0.5,11.39 C0.5,9.76 1.72,8.41 3.31,8.2 C3.38,5.31 5.75,3 8.68,3 C11.19,3 13.31,4.71 13.89,7.02 C14.39,6.8 14.93,6.68 15.5,6.68 C17.71,6.68 19.5,8.45 19.5,10.64 C19.5,12.83 17.71,14.6 15.5,14.6 L12.5,14.6\"></path><polyline\n                        fill=\"none\" stroke=\"#000\" points=\"7.25 11.75 9.5 9.5 11.75 11.75\"></polyline><path fill=\"none\"\n                                                                                                           stroke=\"#000\"\n                                                                                                           d=\"M9.5,18 L9.5,9.5\"></path></svg></span>\n                    <span className=\"uk-text-middle\"> Ziehen Sie Dateien per Drag & Drop hinein oder </span>\n                    <div uk-form-custom=\"\" className=\"uk-form-custom\">\n                        <input type=\"file\" multiple=\"\"></input>\n                            <span className=\"uk-link\">wählen Sie eine Datei aus.</span>\n                    </div>\n                </div>\n\n                <progress id=\"js-progressbar\" className=\"uk-progress\" value=\"0\" max=\"100\" hidden></progress>\n\n                <h2>Liste der verarbeiteten Dokumente</h2>\n\n                <div className=\"uk-overflow-auto\">\n                    <table className=\"uk-table uk-table-striped\">\n                        <thead>\n                        <tr>\n                            <th>Name</th>\n                            <th>Datum</th>\n                            <th>Download</th>\n                            <th>Tags</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr>\n                            <td><code>2019-08-02-bestellakte-max_muster</code></td>\n                            <td>04.11.2019 12:02</td>\n                            <td>PDF</td>\n                            <td><span className=\"uk-label\">0987432094</span> <span className=\"uk-label\">Bestellung PKW</span></td>\n                        </tr>\n                        <tr>\n                            <td><code>Ergänzungsvereinbarung-kunde-9920113</code></td>\n                            <td>04.11.2019 11:20</td>\n                            <td>PDF</td>\n                            <td><span className=\"uk-label\">0977433302</span> <span className=\"uk-label\">Auftragseingang</span></td>\n                        </tr>\n                        <tr>\n                            <td><code>Kunde-Laura-Seger_z.01</code></td>\n                            <td>04.11.2019 10:05</td>\n                            <td>PDF</td>\n                            <td><span className=\"uk-label\">0967438025</span> <span className=\"uk-label\">Zahlungsübersicht</span></td>\n                        </tr>\n                        <tr>\n                            <td><code>01-029_Bestellung-Hans-Vellguth</code></td>\n                            <td>12.10.2019 14:35</td>\n                            <td>PDF</td>\n                            <td><span className=\"uk-label\">0938439327</span> <span className=\"uk-label\">Zahlungsübersicht</span></td>\n                        </tr>\n                        <tr>\n                            <td><code>Lauren-Kohl_Nr02003-2019</code></td>\n                            <td>12.10.2019 14:35</td>\n                            <td>PDF</td>\n                            <td><span className=\"uk-label\">0924479693</span> <span className=\"uk-label\">Übernahmeinformationen</span></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <Model_display childRef={this.myRef}/>\n            <div id=\"ID_Model_correction\"></div>\n        </div>\n        )\n    }\n\n\n}\n\n\nexport default Upload;"]},"metadata":{},"sourceType":"module"}